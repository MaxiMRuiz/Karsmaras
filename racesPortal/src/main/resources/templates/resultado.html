<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header::header-css">
</head>

<body class="body columnaentera" onload="setTime()">
	<div class="container-fluid columnaentera">
		<div class="row columnaentera">
			<div th:replace="fragments/menu::menu">
			</div>
			<div class="col-xs-10 col-10 align-self-center columnaentera">
				<div class="panel panel-default panel-body centerElement">
					<div class="container row col-md-12 well well-sm">
						<form id="formulariopuntuacion" th:action="@{/races/sesion/__${id}__/__${idSesion}__}"
							class="form-horizontal inputForm formAlign" method="post" onsubmit="updateTime()">
							<fieldset>
								<legend class="text-center header">Resultado del piloto [[${nombre}]] en la sesion
									[[${sesion}]]</legend>
								<input type="hidden" th:field="*{resultado.id}" th:value="${resultado.id}"></input>
								<input type="hidden" th:field="*{resultado.piloto.id}"
									th:value="${resultado.piloto.id}"></input>
								<input type="hidden" th:field="*{resultado.sesion.id}"
									th:value="${resultado.sesion.id}"></input>
								<input type="hidden" th:field="*{resultado.tiempo}"
									th:value="${resultado.tiempo}"></input>
								<div class="form-group">
									<span class="col-2 col-md-2 col-xs-2 text-center text-white"><img
											src="/icons/vuelta.png" class="icons" alt="Vueltas" title="Nº de Vueltas">
										Nº Vueltas</span>
									<div class="col-12 col-md-12 col-xs-12">
										<input type="number" class="inputForm" th:field="*{resultado.vueltas}"
											th:value="${resultado.vueltas}" required="required"
											placeholder="Vueltas"></input>
									</div>
								</div>
								<div class="form-group">
									<span class="col-2 col-md-2 col-xs-2 text-center text-white"><img
											src="/icons/vuelta.png" class="icons" alt="Tiempo de la Sesion"
											title="Tiempo total de la Sesion">
										Tiempo</span>
									<div class="col-12 col-md-12 col-xs-12 row text-white">
										H:<input type="number" class="timeInput" placeholder="horas" id="horas" size="1"
											min="0" max="23"></input>
										min:<input type="number" class="timeInput" placeholder="min" id="min" size="2"
											min="0" max="59"></input>
										seg:<input type="number" class="timeInput" placeholder="seg" id="seg" size="2"
											min="0" max="59"></input>
										miliseg.<input type="number" class="timeInput" placeholder="miliseg" id="milis"
											size="3" min="0" max="999"></input>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-12 text-center">
										<a href="#" th:href="@{/races/sesion/__${id}__/__${idSesion}__}">
											<button type="button" class="btn btn-danger btn-primary pull-left"
												id="cancel" name="cancel">Volver
											</button>
										</a>
										<button type="submit" class="btn btn-primary pull-right">Aceptar</button>
									</div>
								</div>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	function setTime() {
		var time = document.getElementById("tiempo").value;
		var horas = document.getElementById("horas");
		var min = document.getElementById("min");
		var seg = document.getElementById("seg");
		var milis = document.getElementById("milis");

		if (time == 0) {
			horas.value = 0;
			min.value = 0;
			seg.value = 0;
			milis.value = 0
		} else {
			milis.value = time % 1000;
			seg.value = Math.floor((time / 1000) % 60);
			min.value = Math.floor(((time / 1000) / 60) % 60);
			horas.value = Math.floor(((time / 1000) / 60) / 60);
		}

	}

	function updateTime() {
		var time = document.getElementById("tiempo");
		var horas = document.getElementById("horas").value;
		var min = document.getElementById("min").value;
		var seg = document.getElementById("seg").value;
		var milis = document.getElementById("milis").value;
		var total = parseInt(milis) + parseInt(seg * 1000) + parseInt(min * 60000) + parseInt(horas * 3600000);
		time.value = total;
		return true;
	}

</script>

</html>